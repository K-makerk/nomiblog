<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>App01ï¼šã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚²ãƒ¼ãƒ é–‹ç™ºè¨˜éŒ² | é£²ã¿ä¼šWebã‚¢ãƒ—ãƒªé–‹ç™ºãƒ–ãƒ­ã‚°</title>
  <meta name="description" content="App01ï¼ˆã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚²ãƒ¼ãƒ ï¼‰ã®é–‹ç™ºæ—¥è¨˜ã€‚UIãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»é€²æ—ãƒ»æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’æ—¥ä»˜ã”ã¨ã«è¨˜éŒ²ãƒ»å…¬é–‹ã€‚" />
  <meta name="google-adsense-account" content="ca-pub-1643561503893272">
  <link rel="stylesheet" href="blog.css" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@500;700&display=swap" rel="stylesheet" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1643561503893272" crossorigin="anonymous"></script>
</head>
<body>
  <header>
    <img src="/images/logo.png" alt="ãƒ­ã‚´" class="logo">
    <h1>App01ï¼šã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚²ãƒ¼ãƒ é–‹ç™ºè¨˜éŒ²</h1>
    <nav>
      <a href="/index.html">ğŸ  ãƒˆãƒƒãƒ—</a> |
      <a href="/terms.html">åˆ©ç”¨è¦ç´„</a> |
      <a href="/privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
    </nav>
  </header>

  <!-- AdSenseåºƒå‘Šï¼ˆä¸Šéƒ¨ï¼‰ -->
  <div class="ad-slot">
    <ins class="adsbygoogle"
      style="display:block; text-align:center;"
      data-ad-client="ca-pub-1643561503893272"
      data-ad-slot="1111111111"
      data-ad-format="auto"
      data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <main>
    <section class="card">
      <h2>ğŸ—“ æ—¥ä»˜ã”ã¨ã®é–‹ç™ºãƒ­ã‚°</h2>
      <div id="post-container"></div>
      <button id="load-more" onclick="loadMorePosts()">ã‚‚ã£ã¨è¦‹ã‚‹</button>
    </section>

    <!-- AdSenseåºƒå‘Šï¼ˆä¸­éƒ¨ï¼‰ -->
    <div class="ad-slot">
      <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-client="ca-pub-1643561503893272"
        data-ad-slot="2222222222"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <section class="card">
      <h3>ğŸ’¬ å„æŠ•ç¨¿ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆ</h3>
      <div id="comment-section"></div>
    </section>

    <!-- AdSenseåºƒå‘Šï¼ˆä¸‹éƒ¨ï¼‰ -->
    <div class="ad-slot">
      <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-client="ca-pub-1643561503893272"
        data-ad-slot="3333333333"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>
  </main>

  <footer>
    <p><a href="/terms.html">åˆ©ç”¨è¦ç´„</a> / <a href="/privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></p>
    <img src="/images/qrcode.png" alt="QRã‚³ãƒ¼ãƒ‰" class="qr">
  </footer>

  <script src="comment.js"></script>
  <script>
    let posts = [];
    let visibleCount = 0;
    const POSTS_PER_PAGE = 3;

    async function fetchPosts() {
      const res = await fetch('/data/posts/post-01.json');
      posts = await res.json();
      displayPosts();
    }

    function displayPosts() {
      const container = document.getElementById('post-container');
      const slice = posts.slice(visibleCount, visibleCount + POSTS_PER_PAGE);
      slice.forEach(post => {
        const div = document.createElement('div');
        div.className = 'daily-post';
        div.innerHTML = `<h4>${post.date}</h4><p>${post.content}</p><div class="comment-box" data-date="${post.date}"></div>`;
        container.appendChild(div);
      });
      visibleCount += POSTS_PER_PAGE;
      if (visibleCount >= posts.length) {
        document.getElementById('load-more').style.display = 'none';
      }
      initCommentBoxes();
    }

    function loadMorePosts() {
      displayPosts();
    }

    function initCommentBoxes() {
      document.querySelectorAll('.comment-box').forEach(box => {
        const date = box.getAttribute('data-date');
        const html = `
          <input type="text" placeholder="åå‰ï¼ˆä»»æ„ï¼‰" id="name-${date}">
          <textarea placeholder="ã‚³ãƒ¡ãƒ³ãƒˆã‚’å…¥åŠ›" id="text-${date}"></textarea>
          <button onclick="postComment('${date}')">æŠ•ç¨¿</button>
          <ul id="comments-${date}" class="comment-list"></ul>
        `;
        box.innerHTML = html;
        loadComments(date);
      });
    }

    function postComment(date) {
      const name = document.getElementById(`name-${date}`).value || "åŒ¿å";
      const text = document.getElementById(`text-${date}`).value.trim();
      if (!text || /æ‚ªå£|æ®ºã™|æ­»ã­/.test(text)) return alert("ä¸é©åˆ‡ãªæŠ•ç¨¿ã§ã™");
      const comment = { name, text, time: new Date().toLocaleString() };
      const key = `comment-post-01-${date}`;
      const list = JSON.parse(localStorage.getItem(key) || "[]");
      list.push(comment);
      localStorage.setItem(key, JSON.stringify(list));
      loadComments(date);
      document.getElementById(`text-${date}`).value = "";
    }

    function loadComments(date) {
      const key = `comment-post-01-${date}`;
      const ul = document.getElementById(`comments-${date}`);
      const list = JSON.parse(localStorage.getItem(key) || "[]");
      ul.innerHTML = "";
      list.forEach(c => {
        const li = document.createElement("li");
        li.innerHTML = `<strong>${c.name}</strong>ï¼š${c.text} <small>(${c.time})</small>`;
        ul.appendChild(li);
      });
    }

    window.onload = fetchPosts;
  </script>
</body>
</html>
